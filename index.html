<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RS' Multi-Site Quick Access Dashboard</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <!-- Load Lucide Icons (Pure JS) -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* Custom styles for a CLEAN LIGHT look */
        body {
            font-family: 'Inter', sans-serif;
            /* Neon Lime Green Background */
            background-color: #88FF00;
        }
        .icon-container {
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            color: white; /* Category icon remains white for contrast */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06); 
        }
        /* Custom hover effect for link cards (Dark glow effect) */
        .link-card-wrapper { /* Wrapper div for relative positioning */
            position: relative;
        }
        .link-card {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out, background-color 0.2s ease-in-out;
            cursor: pointer;
        }
        .link-card:hover {
            transform: translateY(-2px);
            /* Deep Navy/Black Glow effect on hover */
            box-shadow: 0 0 10px rgba(15, 23, 42, 0.3); /* Slate 900 Glow */
            background-color: #E2E8F0; /* Slate 200: Slightly darker component on hover */
        }

        /* Category Card Hover Effect */
        .category-card:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.2), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
            border-color: #4F46E5; /* Indigo border on hover */
        }
        
        /* Modal styling - Used for both Add Link and Confirmation */
        .modal {
            /* Adjusted backdrop for better contrast against the bright background */
            background-color: rgba(0, 0, 0, 0.2); 
            backdrop-filter: blur(8px); 
            transition: opacity 0.3s ease-in-out;
        }

        /* DELETE BUTTON STYLING */
        .delete-btn {
            position: absolute;
            top: -10px; 
            right: -10px; 
            background-color: #EF4444; /* Red 500 */
            color: white;
            border-radius: 9999px; 
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            transition: transform 0.1s, background-color 0.1s;
            cursor: pointer;
            z-index: 10; 
            opacity: 0; 
            visibility: hidden;
        }

        /* Show delete button on card wrapper hover */
        .link-card-wrapper:hover .delete-btn {
            opacity: 1;
            visibility: visible;
        }
        
        .delete-btn:hover {
            background-color: #DC2626; /* Red 600 */
            transform: scale(1.1);
        }
    </style>
</head>
<body class="p-4 sm:p-8">

    <div class="max-w-7xl mx-auto">
        <header class="text-center mb-10">
            <h1 class="text-4xl sm:text-5xl font-extrabold text-gray-900 mb-2 tracking-tight">RS' Multi-Site Quick Access Dashboard & Daily Navigator âœ¨</h1>
            <p class="text-gray-700 text-lg">Your centralized hub for all 5+ accounts and essential web services.</p>
        </header>

        <!-- Button to open the modal -->
        <div class="mb-10 flex justify-center">
            <button id="openModalButton" class="flex items-center space-x-2 px-8 py-3 bg-indigo-600 text-white font-semibold rounded-full shadow-lg hover:bg-indigo-700 transition duration-300 transform hover:scale-[1.02]">
                <i data-lucide="Plus" class="w-5 h-5"></i>
                <span>Add New Link</span>
            </button>
        </div>

        <main id="dashboard-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <!-- Categories will be rendered here by JavaScript -->
        </main>
    </div>

    <!-- Add Link Modal - LIGHT THEME -->
    <div id="addLinkModal" class="modal fixed inset-0 z-50 flex items-center justify-center opacity-0 pointer-events-none p-4">
        <div class="bg-white p-6 sm:p-8 rounded-xl shadow-2xl w-full max-w-lg transform scale-95 transition duration-300 border border-gray-200">
            <h3 class="text-2xl font-bold text-gray-900 mb-4 border-b border-gray-200 pb-3">Add New Quick Link</h3>
            <form id="addLinkForm">
                
                <div class="mb-4">
                    <label for="linkName" class="block text-sm font-medium text-gray-700 mb-1">Link Name (e.g., Jira, Personal Mail)</label>
                    <input type="text" id="linkName" required class="w-full p-3 rounded-lg bg-gray-100 text-gray-900 border border-gray-300 focus:border-indigo-500 focus:ring focus:ring-indigo-500/50" placeholder="My New Site">
                </div>

                <div class="mb-4">
                    <label for="linkUrl" class="block text-sm font-medium text-gray-700 mb-1">URL (e.g., google.com)</label>
                    <input type="text" id="linkUrl" required class="w-full p-3 rounded-lg bg-gray-100 text-gray-900 border border-gray-300 focus:border-indigo-500 focus:ring focus:ring-indigo-500/50" placeholder="example.com">
                </div>

                <div class="mb-6">
                    <label for="linkCategory" class="block text-sm font-medium text-gray-700 mb-1">Category</label>
                    <select id="linkCategory" required class="w-full p-3 rounded-lg bg-gray-100 text-gray-900 border border-gray-300 focus:border-indigo-500 focus:ring focus:ring-indigo-500/50">
                        <!-- Options populated by JavaScript -->
                    </select>
                </div>

                <div class="flex justify-end space-x-4">
                    <button type="button" id="closeModalButton" class="px-5 py-2 bg-gray-200 text-gray-700 rounded-full hover:bg-gray-300 transition duration-200 font-semibold">Cancel</button>
                    <button type="submit" class="px-5 py-2 bg-indigo-600 text-white rounded-full hover:bg-indigo-700 transition duration-200 font-semibold">Add Link</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Confirmation Delete Modal (Custom UI) -->
    <div id="confirmDeleteModal" class="modal fixed inset-0 z-50 flex items-center justify-center opacity-0 pointer-events-none p-4">
        <div class="bg-white p-6 sm:p-8 rounded-xl shadow-2xl w-full max-w-xs transform scale-95 transition duration-300 border border-red-200">
            <div class="flex items-center space-x-3 mb-4">
                <i data-lucide="AlertTriangle" class="w-6 h-6 text-red-500"></i>
                <h3 class="text-xl font-bold text-gray-900">Confirm Deletion</h3>
            </div>
            <p id="confirmMessage" class="text-gray-700 mb-6 text-sm">
                Are you sure you want to delete this link? This action cannot be undone.
            </p>

            <div class="flex justify-end space-x-3">
                <button type="button" id="cancelDeleteButton" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition duration-200 text-sm font-medium">Cancel</button>
                <button type="button" id="confirmDeleteButton" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition duration-200 text-sm font-medium">Delete Link</button>
            </div>
        </div>
    </div>

    <script>
        // Key for Local Storage
        const STORAGE_KEY = 'quickAccessSites';
        // Global variable to store context for deletion
        let linkToDelete = null;

        // Original, default data structure
        const DEFAULT_SITES = [
            {
                category: "Personal",
                icon: "Heart", 
                color: "bg-purple-600",
                links: [
                    { name: "Personal Mail", url: "https://mail.private.com", icon: "Mail", description: "Your private email account." },
                    { name: "Family Calendar", url: "https://calendar.google.com/family", icon: "Calendar", description: "Shared family schedule." }
                ]
            },
            {
                category: "Career & Development",
                icon: "Briefcase",
                color: "bg-indigo-600",
                links: [
                    { name: "GitHub Repository Access", url: "https://github.com", icon: "Code", description: "Source code management and project tracking." },
                    { name: "Google Cloud Console", url: "https://cloud.google.com", icon: "Cloud", description: "Cloud computing and hosting infrastructure management." },
                    { name: "Stack Overflow Developer Q&A", url: "https://stackoverflow.com/", icon: "Users", description: "Technical questions and answers for programmers." },
                    { name: "LinkedIn Professional Network", url: "https://www.linkedin.com/", icon: "Zap", description: "Professional networking and job hunting platform." }
                ]
            },
            {
                category: "Communication & Tools",
                icon: "MessageCircle",
                color: "bg-teal-600",
                links: [
                    { name: "Gmail Primary Inbox", url: "https://mail.google.com", icon: "Mail", description: "Access all your primary inboxes for daily communication." },
                    { name: "Google Search Engine", url: "https://google.com", icon: "Search", description: "Daily research, learning, and queries." },
                    { name: "ChatGPT Generative AI", url: "https://chat.openai.com", icon: "Bot", description: "Conversational AI assistant for brainstorming and drafting." }
                ]
            },
            {
                category: "Entertainment & Media",
                icon: "PlayCircle",
                color: "bg-pink-600",
                links: [
                    { name: "YouTube Video Platform", url: "https://youtube.com", icon: "MonitorPlay", description: "Long-form and short-form video content platform." },
                    { name: "Netflix Streaming Service", url: "https://www.netflix.com/", icon: "Clapperboard", description: "Movies, TV shows, and streaming documentaries." },
                    { name: "Twitch Live Gaming Streams", url: "https://www.twitch.tv/", icon: "Gamepad2", description: "Live streaming and community gaming platform." }
                ]
            },
            {
                category: "E-commerce & Shopping",
                icon: "ShoppingCart",
                color: "bg-green-600",
                links: [
                    { name: "Amazon Global Retailer", url: "https://amazon.com", icon: "Package", description: "Global online retailer for products and services." },
                    { name: "Flipkart India E-commerce", url: "https://flipkart.com", icon: "Tags", description: "Indian e-commerce giant for electronics and fashion." },
                    { name: "Ebay Auction and Retail", url: "https://www.ebay.com/", icon: "ShoppingBag", description: "Auction and general retail site for new and used goods." }
                ]
            },
            {
                category: "Reference & Knowledge",
                icon: "BookOpen",
                color: "bg-amber-600",
                links: [
                    { name: "Wikipedia The Free Encyclopedia", url: "https://www.wikipedia.org/", icon: "Globe", description: "The Free Encyclopedia containing general knowledge articles." },
                    { name: "Google Drive Cloud Storage", url: "https://drive.google.com/", icon: "Folder", description: "Cloud storage access for documents and files." },
                    { name: "Notion All-in-one Workspace", url: "https://www.notion.so/", icon: "LayoutDashboard", description: "Project management, notes, and organizational workspace." }
                ]
            }
        ];

        // Global variable to hold the live data
        let sites = []; 

        const dashboardGrid = document.getElementById('dashboard-grid');
        const modal = document.getElementById('addLinkModal');
        const openModalBtn = document.getElementById('openModalButton');
        const closeModalBtn = document.getElementById('closeModalButton');
        const addLinkForm = document.getElementById('addLinkForm');
        const categorySelect = document.getElementById('linkCategory');
        const confirmDeleteModal = document.getElementById('confirmDeleteModal');
        const confirmMessage = document.getElementById('confirmMessage');
        const confirmDeleteButton = document.getElementById('confirmDeleteButton');
        const cancelDeleteButton = document.getElementById('cancelDeleteButton');
        
        // --- Persistence Functions ---

        /**
         * Loads the sites data from Local Storage, or uses defaults if none found.
         */
        function loadSitesFromStorage() {
            try {
                const storedData = localStorage.getItem(STORAGE_KEY);
                if (storedData) {
                    // Check if stored data is valid JSON array before parsing
                    const parsedData = JSON.parse(storedData);
                    if (Array.isArray(parsedData) && parsedData.length > 0) {
                        sites = parsedData;
                    } else {
                        sites = DEFAULT_SITES;
                    }
                } else {
                    sites = DEFAULT_SITES;
                }
            } catch (e) {
                console.error("Error loading data from Local Storage, using default.", e);
                sites = DEFAULT_SITES;
            }
        }

        /**
         * Saves the current sites array to Local Storage.
         */
        function saveSitesToStorage() {
            try {
                localStorage.setItem(STORAGE_KEY, JSON.stringify(sites));
            } catch (e) {
                console.error("Error saving data to Local Storage.", e);
            }
        }

        // --- Confirmation Modal Functions ---

        /**
         * Shows the confirmation modal and sets the context for deletion.
         */
        function showConfirmModal(categoryName, linkUrl, linkName) {
            linkToDelete = { categoryName, linkUrl, linkName };
            
            // Update modal message with the specific link name
            confirmMessage.innerHTML = `Are you sure you want to delete the link: 
                <span class="font-semibold text-red-600">"${linkName}"</span>? 
                This action cannot be undone.`;

            confirmDeleteModal.classList.remove('opacity-0', 'pointer-events-none');
            confirmDeleteModal.querySelector('div').classList.remove('scale-95');
            confirmDeleteModal.querySelector('div').classList.add('scale-100');
        }

        function hideConfirmModal() {
            linkToDelete = null;
            confirmDeleteModal.classList.add('opacity-0', 'pointer-events-none');
            confirmDeleteModal.querySelector('div').classList.remove('scale-100');
            confirmDeleteModal.querySelector('div').classList.add('scale-95');
        }

        // --- Core Deletion and Rendering Functions ---

        /**
         * Performs the actual link removal after confirmation.
         */
        function executeDeleteLink() {
            if (!linkToDelete) return;

            const { categoryName, linkUrl } = linkToDelete;

            const category = sites.find(c => c.category === categoryName);
            if (category) {
                const linkIndex = category.links.findIndex(link => link.url === linkUrl);
                
                if (linkIndex !== -1) {
                    category.links.splice(linkIndex, 1); // Remove the link
                    saveSitesToStorage(); // SAVE to Local Storage
                    renderDashboard(); // Re-render the dashboard
                }
            } else {
                console.error("Error: Category not found for deletion execution.");
            }
            hideConfirmModal();
        }

        /**
         * Creates the HTML element for a single quick link, including a delete button.
         * @param {object} link 
         * @param {string} categoryName 
         * @returns {HTMLElement}
         */
        function createLinkElement(link, categoryName) {
             // Wrapper for relative positioning of the delete button
             const wrapperElement = document.createElement('div');
             wrapperElement.className = "link-card-wrapper";
             
             // The actual clickable link card
             const linkElement = document.createElement('a');
             linkElement.href = link.url;
             linkElement.target = "_blank"; 
             linkElement.className = "link-card p-3 bg-gray-100 rounded-lg transition duration-200 ease-in-out border border-gray-300 block h-full flex flex-col justify-between";

             const iconName = link.icon || "Link"; 

             linkElement.innerHTML = `
                 <div class="flex items-center space-x-2 mb-1">
                     <i data-lucide="${iconName}" class="w-5 h-5 text-indigo-600 flex-shrink-0"></i>
                     <!-- Removed truncate class to show full link name -->
                     <span class="text-sm font-semibold text-gray-900 leading-tight">${link.name}</span>
                 </div>
                 <!-- Removed hidden sm:block class to show description on mobile -->
                 <p class="text-xs text-gray-500">${link.description || 'Quick access link.'}</p>
             `;
             
             // The Delete Button
             const deleteButton = document.createElement('button');
             deleteButton.className = "delete-btn";
             deleteButton.innerHTML = `<i data-lucide="X" class="w-4 h-4"></i>`;
             
             deleteButton.addEventListener('click', (e) => {
                 e.preventDefault(); 
                 e.stopPropagation(); 
                 showConfirmModal(categoryName, link.url, link.name);
             });
             
             wrapperElement.appendChild(linkElement);
             wrapperElement.appendChild(deleteButton);

             return wrapperElement;
        }
        
        /**
         * Toggles the visibility of the link grid when the button is clicked.
         * @param {Event} event 
         */
        function handleCategoryToggle(event) {
            const button = event.currentTarget;
            const targetId = button.getAttribute('data-target-id');
            const targetGrid = document.getElementById(targetId);
            
            const icon = button.querySelector('svg');

            if (targetGrid.classList.contains('hidden')) {
                targetGrid.classList.remove('hidden');
                if (icon) {
                    icon.style.transform = 'rotate(0deg)';
                }
            } else {
                targetGrid.classList.add('hidden');
                if (icon) {
                    icon.style.transform = 'rotate(-180deg)';
                }
            }
        }

        /**
         * Clears, re-renders the dashboard, and re-attaches all event listeners.
         */
        function renderDashboard() {
            dashboardGrid.innerHTML = '';
            
            sites.forEach(category => {
                dashboardGrid.appendChild(createCategorySection(category));
            });
            
            // Re-initialize Lucide icons for new elements
            lucide.createIcons();
            
            populateCategoryDropdown();
            
            document.querySelectorAll('.toggle-switch').forEach(button => {
                button.removeEventListener('click', handleCategoryToggle);
                button.addEventListener('click', handleCategoryToggle);
            });
        }

        /**
         * Creates the HTML section for an entire category card.
         */
        function createCategorySection(categoryData) {
            const section = document.createElement('div');
            section.className = "category-card bg-white p-6 rounded-xl shadow-lg transition duration-300 border border-gray-200 flex flex-col";
            section.id = `category-${categoryData.category.replace(/\s+/g, '-')}`;

            const categoryId = categoryData.category.replace(/\s+/g, '-');

            const header = document.createElement('div');
            header.className = "flex items-center space-x-4 mb-6 pb-4 border-b border-gray-200"; 
            
            const iconWrapper = document.createElement('div');
            iconWrapper.className = `icon-container ${categoryData.color} flex-shrink-0`;
            iconWrapper.innerHTML = `<i data-lucide="${categoryData.icon}" class="w-6 h-6"></i>`;
            
            const title = document.createElement('h2');
            // Removed truncate class
            title.className = "text-xl sm:text-2xl font-bold text-gray-900 tracking-wide flex-grow break-words";
            title.textContent = categoryData.category;

            const toggleButton = document.createElement('button');
            toggleButton.className = "toggle-switch ml-auto p-2 rounded-full text-indigo-600/70 hover:text-indigo-700 hover:bg-indigo-50 transition duration-300 flex-shrink-0";
            toggleButton.setAttribute('data-target-id', `link-grid-${categoryId}`);
            toggleButton.innerHTML = `<i data-lucide="ChevronUp" class="w-6 h-6 transform transition-transform duration-300"></i>`;
            
            header.appendChild(iconWrapper);
            header.appendChild(title);
            header.appendChild(toggleButton); 
            section.appendChild(header);

            // Responsive grid for links: always 2 columns, even on mobile
            const linkGrid = document.createElement('div');
            linkGrid.className = "grid-content grid grid-cols-2 gap-4 flex-grow"; 
            linkGrid.id = `link-grid-${categoryId}`; 

            categoryData.links.forEach(link => {
                linkGrid.appendChild(createLinkElement(link, categoryData.category));
            });

            section.appendChild(linkGrid);
            return section;
        }


        // --- Modal and Form Functions ---
        function populateCategoryDropdown() {
            categorySelect.innerHTML = '';
            sites.forEach(category => {
                const option = document.createElement('option');
                option.value = category.category;
                option.textContent = category.category;
                categorySelect.appendChild(option);
            });
        }
        
        function openModal() {
            modal.classList.remove('opacity-0', 'pointer-events-none');
            modal.querySelector('div').classList.remove('scale-95');
            modal.querySelector('div').classList.add('scale-100');
        }

        function closeModal() {
            modal.classList.add('opacity-0', 'pointer-events-none');
            modal.querySelector('div').classList.remove('scale-100');
            modal.querySelector('div').classList.add('scale-95');
            addLinkForm.reset();
        }

        /**
         * Handles form submission. Now saves to storage after adding the link.
         */
        function handleAddLink(event) {
            event.preventDefault();
            
            const name = document.getElementById('linkName').value;
            let url = document.getElementById('linkUrl').value.trim(); 
            const categoryName = document.getElementById('linkCategory').value;
            
            if (url && !url.startsWith('http://') && !url.startsWith('https://')) {
                url = 'https://www.' + url;
            }

            const newLink = {
                name: name,
                url: url,
                icon: "Link",
                description: `Added by user on ${new Date().toLocaleDateString()}`
            };

            const category = sites.find(c => c.category === categoryName);
            if (category) {
                category.links.push(newLink);
                saveSitesToStorage();
                renderDashboard();
                closeModal();
            } else {
                console.error("Category not found.");
            }
        }

        // --- Event Listeners and Initialization ---

        // Initialize the dashboard on load
        window.onload = function() {
            loadSitesFromStorage(); 
            renderDashboard(); 
            
            // Set up event listeners for Add Link modal
            openModalBtn.addEventListener('click', openModal);
            closeModalBtn.addEventListener('click', closeModal);
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal();
                }
            });
            addLinkForm.addEventListener('submit', handleAddLink);

            // Confirmation Modal Listeners
            confirmDeleteButton.addEventListener('click', executeDeleteLink);
            cancelDeleteButton.addEventListener('click', hideConfirmModal);
            confirmDeleteModal.addEventListener('click', (e) => {
                if (e.target === confirmDeleteModal) {
                    hideConfirmModal();
                }
            });

            // Re-initialize Lucide icons for static elements (like the modal icons)
            lucide.createIcons();
        };
    </script>

</body>
</html>
